{% extends "base.html" %}

{% block title %}è®¢å•åˆ—è¡¨ - é…’åº—ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block sidebar %}
<aside class="sidebar">
  <a href="{{ url_for('dashboard.dashboard_hotel') }}" class="is-active"><i class="fas fa-tachometer-alt"></i> ä»ªè¡¨ç›˜</a>
  <a href="{{ url_for('dashboard.dashboard_hotel') }}"><i class="fas fa-users"></i> æˆ‘çš„é…’åº—</a>
  <a href="{{ url_for('dashboard.change_password', role='hotel') }}"><i class="fa-solid fa-lock"></i> ä¿®æ”¹å¯†ç  </a>
</aside>
{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
      <h1 class="title is-3">é…’åº—ï¼š{{ hotel.hotelName }} çš„è®¢å•</h1>
  
      <div class="box">
        <h2 class="title is-5">è®¢å•ç­›é€‰</h2>
        <form method="get" action="{{ url_for('dashboard.hotel_bookings', hotel_id=hotel.hotelId) }}">
          <div class="columns is-multiline">
  
            <div class="column is-one-third">
              <div class="field">
                <label class="label">å…¥ä½èµ·å§‹æ—¥æœŸ</label>
                <div class="control">
                  <input class="input" type="date" name="checkin_start" value="{{ checkin_start }}">
                </div>
              </div>
            </div>
  
            <div class="column is-one-third">
              <div class="field">
                <label class="label">å…¥ä½ç»“æŸæ—¥æœŸ</label>
                <div class="control">
                  <input class="input" type="date" name="checkin_end" value="{{ checkin_end }}">
                </div>
              </div>
            </div>
  
            <div class="column is-one-third">
              <div class="field">
                <label class="label">è®¢å•çŠ¶æ€</label>
                <div class="control">
                  <div class="select is-fullwidth">
                    <select name="status">
                      <option value="">å…¨éƒ¨</option>
                      <option value="notCheckIn" {% if status_filter == 'notCheckIn' %}selected{% endif %}>æœªå…¥ä½</option>
                      <option value="checkIn" {% if status_filter == 'checkIn' %}selected{% endif %}>å·²å…¥ä½</option>
                      <option value="checkOut" {% if status_filter == 'checkOut' %}selected{% endif %}>å·²é€€æˆ¿</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
  
            <div class="column is-full">
              <div class="buttons">
                <button class="button is-primary" type="submit">ğŸ” ç­›é€‰</button>
                <a class="button is-light" href="{{ url_for('dashboard.hotel_bookings', hotel_id=hotel.hotelId) }}">æ¸…é™¤ç­›é€‰</a>
              </div>
            </div>
  
          </div>
        </form>
      </div>
  
      {% if bookings %}
      <div class="table-container">
        <table class="table is-striped is-hoverable is-bordered is-fullwidth">
          <thead>
            <tr>
              <th>è®¢å•ç¼–å·</th>
              <th>å®¢æˆ·ID</th>
              <th>æˆ¿å‹ID</th>
              <th>å…¥ä½æ—¶é—´</th>
              <th>é€€æˆ¿æ—¶é—´</th>
              <th>æ€»ä»·</th>
              <th>çŠ¶æ€</th>
            </tr>
          </thead>
          <tbody>
            {% for booking in bookings %}
            <tr>
              <td>{{ booking.bookingId }}</td>
              <td>{{ booking.customerId }}</td>
              <td>{{ booking.roomId }}</td>
              <td>{{ booking.checkIn }}</td>
              <td>{{ booking.checkOut }}</td>
              <td>Â¥{{ booking.totalPrice }}</td>
              <td>
                {% if booking.status == 'notCheckIn' %}
                  <span class="tag is-warning">æœªå…¥ä½</span>
                {% elif booking.status == 'checkIn' %}
                  <span class="tag is-info">å·²å…¥ä½</span>
                {% elif booking.status == 'checkOut' %}
                  <span class="tag is-success">å·²é€€æˆ¿</span>
                {% else %}
                  <span class="tag is-light">{{ booking.status }}</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="has-text-grey">æš‚æ— ç¬¦åˆæ¡ä»¶çš„è®¢å•ã€‚</p>
      {% endif %}
  
      <br>
      <a class="button is-link is-light" href="{{ url_for('dashboard.hotel_detail', hotel_id=hotel.hotelId) }}">
        â¬… è¿”å›é…’åº—è¯¦æƒ…
      </a>
    </div>
  </section>
  
{% endblock %}